/*
 * jsen
 * https://github.com/bugventure/jsen
 * v0.6.4
 *
 * Copyright (c) 2016 Veli Pehlivanov <bugventure@gmail.com>
 * Licensed under the MIT license
 */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jsen=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/jsen.js")},{"./lib/jsen.js":5}],2:[function(a,b,c){"use strict";function d(a){var b=Object.prototype.toString.call(a);return b.substr(8,b.length-9).toLowerCase()}function e(a,b){var c,d,e=Object.keys(a).sort(),g=Object.keys(b).sort();if(!f(e,g))return!1;for(c=0;c<e.length;c++)if(d=e[c],!f(a[d],b[d]))return!1;return!0}function f(a,b){var c,g=typeof a,h=typeof b;if("object"===g&&(g=d(a)),"object"===h&&(h=d(b)),g!==h)return!1;if("object"===g)return e(a,b);if("regexp"===g)return a.toString()===b.toString();if("array"===g){if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(!f(a[c],b[c]))return!1;return!0}return a===b}b.exports=f},{}],3:[function(a,b,c){"use strict";var d={};d["date-time"]=/(\d\d\d\d)(-)?(\d\d)(-)?(\d\d)(T)?(\d\d)(:)?(\d\d)(:)?(\d\d)(\.\d+)?(Z|([+-])(\d\d)(:)?(\d\d))/,d.uri=/^([a-zA-Z][a-zA-Z0-9+-.]*:){0,1}\/\/[^\s]*$/,d.email=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,d.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,d.ipv6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|[fF][eE]80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::([fF]{4}(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,d.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9]))*$/,b.exports=d},{}],4:[function(a,b,c){"use strict";b.exports=function(){var a=Array.apply(null,arguments),b=a.shift(),c="  ",d="",e="",f=1,g="{[",h="}]",i=function(){for(var a=c,b=0;b++<f-1;)a+=c;return a},j=function(a){d+=i()+a+"\n"},k=function(a){var b=a[0],c=a[a.length-1];return h.indexOf(b)>-1&&g.indexOf(c)>-1?(f--,j(a),f++):g.indexOf(c)>-1?(j(a),f++):h.indexOf(b)>-1?(f--,j(a)):j(a),k};return k.def=function(a,b){return e+=(e?",\n"+c+"    ":"")+a+(void 0!==b?" = "+b:""),k},k.toSource=function(){return"function "+b+"("+a.join(", ")+") {\n"+c+'"use strict"\n'+(e?c+"var "+e+";\n":"")+d+"}"},k.compile=function(a){var b="return ("+k.toSource()+")",c=a||{},d=Object.keys(c),e=d.map(function(a){return c[a]});return Function.apply(null,d.concat(b)).apply(null,e)},k}},{}],5:[function(a,b,c){"use strict";function d(a){return a=a instanceof RegExp?a:new RegExp(a),w?a.toString():"/"+a.source.replace(r,"\\$&")+"/"}function e(a){return'"'+a.replace(s,"\\$1")+'"'}function f(a,b){return t.lastIndex=0,t.test(b)?a+"."+b:a+"["+e(b)+"]"}function g(a){if(void 0===a)return"undefined";var b=Object.prototype.toString.call(a);return b.substr(8,b.length-9).toLowerCase()}function h(a){return(0|a)===a}function i(a,b){E[b].type=a,E[b].keyword=b}function j(a){var b,c,d,e=Object.keys(a),f=e.indexOf("properties"),g=e.indexOf("patternProperties"),h={"enum":Array.isArray(a["enum"])&&a["enum"].length>0,type:null,allType:[],perType:{}};for(a.type&&("string"==typeof a.type?h.type=[a.type]:Array.isArray(a.type)&&a.type.length&&(h.type=a.type.slice(0))),d=0;d<e.length;d++)b=e[d],"enum"!==b&&"type"!==b&&(c=E[b],c&&(c.type?(h.perType[c.type]||(h.perType[c.type]=[]),f>-1&&"required"===b||g>-1&&"additionalProperties"===b||h.perType[c.type].push(b)):h.allType.push(b)));return h}function k(a,b){var c,d,e=a.substr(4),f=e.length,g=[],h="",i=!1;for(d=0;f>d;d++)switch(c=e[d]){case".":h&&(h+=c);break;case"[":isNaN(+e[d+1])?(i=!0,h&&(g.push('"'+h+'"'),h="")):(i=!1,h&&(h+="."));break;case"]":g.push(i?h:'"'+h+'"'),h="";break;default:h+=c}return h&&g.push('"'+h+'"'),b&&g.push('"'+b+'"'),1===g.length&&i?'"" + '+g[0]+' + ""':g.join(' + "." + ')||'""'}function l(a){var b,c,d,e,f=a,h=g(a);if("object"===h)for(f={},b=Object.keys(a),e=0,c=b.length;c>e;e++)d=b[e],f[d]=l(a[d]);else if("array"===h)for(f=[],e=0,c=a.length;c>e;e++)f[e]=l(a[e]);else{if("regexp"===h)return new RegExp(a);if("date"===h)return new Date(a.toJSON())}return f}function m(a,b){for(var c=0,d=b.length;d>c;c++)if(y(a,b[c]))return!0;return!1}function n(){this.objects=[],this.properties=[]}function o(a,b,c,d,e){var f,h,i,j,k,m,p;if("object"!==g(a))return b;if(a=d.resolve(a),void 0===b&&a.hasOwnProperty("default")&&(b=l(a["default"])),f=g(b),"object"===f&&"object"===g(a.properties)){for(m=Object.keys(a.properties),j=0;j<m.length;j++)i=m[j],h=o(a.properties[i],b[i],c,d),void 0!==h&&(b[i]=h);if("always"!==c)for(p=Object.keys(b),j=0;j<p.length;j++)i=p[j],m.indexOf(i)<0&&(a.additionalProperties===!1||c===!1&&!a.additionalProperties)&&(e?e.mark(b,i):delete b[i])}else if("array"===f&&a.items){if("array"===g(a.items))for(j=0;j<a.items.length;j++)h=o(a.items[j],b[j],c,d),(void 0!==h||j<b.length)&&(b[j]=h);else if(b.length)for(j=0;j<b.length;j++)b[j]=o(a.items,b[j],c,d)}else if("array"===g(a.allOf)&&a.allOf.length){for(k=new n,j=0;j<a.allOf.length;j++)b=o(a.allOf[j],b,c,d,k);k.deleteDuplicates(),k.dispose()}return b}function p(a){this.path="data",this.schema=a.schema,this.formats=a.formats,this.greedy=a.greedy,this.resolver=a.resolver,this.id=a.id,this.funcache=a.funcache||{},this.scope=a.scope||{equalAny:m,unique:z,ucs2length:C,refs:{}}}function q(a,b){if("object"!==g(a))throw new Error(u);b=b||{};var c=0,d=function(){return"i"+c++},e=new A(a,b.schemas,b.missing$Ref||!1),f=new p({schema:a,resolver:e,id:d,schemas:b.schemas,formats:b.formats,greedy:b.greedy||!1}),h=x("validate","data")("validate.errors = []")('gen(data, "", validate.errors)')("return validate.errors.length === 0").compile({gen:f.compile()});return f.dispose(),f=null,h.errors=[],h.build=function(b,c){return o(a,c&&c.copy===!1?b:l(b),c&&c.additionalProperties,e)},h}var r=/[\/]/g,s=/(")/gim,t=/^[a-z_$][0-9a-z]*$/gi,u="jsen: invalid schema object",v="object"==typeof window&&!!window.navigator,w="/"!==new RegExp("/").source,x=a("./func.js"),y=a("./equal.js"),z=a("./unique.js"),A=a("./resolver.js"),B=a("./formats.js"),C=a("./ucs2length.js"),D={},E={};D["null"]=function(a){return a+" === null"},D["boolean"]=function(a){return"typeof "+a+' === "boolean"'},D.string=function(a){return"typeof "+a+' === "string"'},D.number=function(a){return"typeof "+a+' === "number"'},D.integer=function(a){return"typeof "+a+' === "number" && !('+a+" % 1)"},D.array=function(a){return"Array.isArray("+a+")"},D.object=function(a){return"typeof "+a+' === "object" && '+a+" !== null && !Array.isArray("+a+")"},D.date=function(a){return a+" instanceof Date"},E["enum"]=function(a){var b=a.schema["enum"];a.code("if (!equalAny("+a.path+", "+JSON.stringify(b)+")) {"),a.error("enum"),a.code("}")},E.minimum=function(a){"number"==typeof a.schema.minimum&&(a.code("if ("+a.path+" < "+a.schema.minimum+") {"),a.error("minimum"),a.code("}"))},E.exclusiveMinimum=function(a){a.schema.exclusiveMinimum===!0&&"number"==typeof a.schema.minimum&&(a.code("if ("+a.path+" === "+a.schema.minimum+") {"),a.error("exclusiveMinimum"),a.code("}"))},E.maximum=function(a){"number"==typeof a.schema.maximum&&(a.code("if ("+a.path+" > "+a.schema.maximum+") {"),a.error("maximum"),a.code("}"))},E.exclusiveMaximum=function(a){a.schema.exclusiveMaximum===!0&&"number"==typeof a.schema.maximum&&(a.code("if ("+a.path+" === "+a.schema.maximum+") {"),a.error("exclusiveMaximum"),a.code("}"))},E.multipleOf=function(a){if("number"==typeof a.schema.multipleOf){var b=a.schema.multipleOf,c=b.toString().length-b.toFixed(0).length-1,d=c>0?Math.pow(10,c):1,e=a.path;c>0?a.code("if (+(Math.round(("+e+" * "+d+') + "e+" + '+c+') + "e-" + '+c+") % "+b*d+" !== 0) {"):a.code("if ((("+e+" * "+d+") % "+b*d+") !== 0) {"),a.error("multipleOf"),a.code("}")}},E.minLength=function(a){h(a.schema.minLength)&&(a.code("if (ucs2length("+a.path+") < "+a.schema.minLength+") {"),a.error("minLength"),a.code("}"))},E.maxLength=function(a){h(a.schema.maxLength)&&(a.code("if (ucs2length("+a.path+") > "+a.schema.maxLength+") {"),a.error("maxLength"),a.code("}"))},E.pattern=function(a){var b=a.schema.pattern;("string"==typeof b||b instanceof RegExp)&&(a.code("if (!("+d(b)+").test("+a.path+")) {"),a.error("pattern"),a.code("}"))},E.format=function(a){"string"==typeof a.schema.format&&B[a.schema.format]&&(a.code("if (!("+B[a.schema.format]+").test("+a.path+")) {"),a.error("format"),a.code("}"))},E.minItems=function(a){h(a.schema.minItems)&&(a.code("if ("+a.path+".length < "+a.schema.minItems+") {"),a.error("minItems"),a.code("}"))},E.maxItems=function(a){h(a.schema.maxItems)&&(a.code("if ("+a.path+".length > "+a.schema.maxItems+") {"),a.error("maxItems"),a.code("}"))},E.additionalItems=function(a){a.schema.additionalItems===!1&&Array.isArray(a.schema.items)&&(a.code("if ("+a.path+".length > "+a.schema.items.length+") {"),a.error("additionalItems"),a.code("}"))},E.uniqueItems=function(a){a.schema.uniqueItems&&(a.code("if (unique("+a.path+").length !== "+a.path+".length) {"),a.error("uniqueItems"),a.code("}"))},E.items=function(a){var b=a.declare(0),c=0;if("object"===g(a.schema.items))a.code("for ("+b+" = 0; "+b+" < "+a.path+".length; "+b+"++) {"),a.descend(a.path+"["+b+"]",a.schema.items),a.code("}");else if(Array.isArray(a.schema.items)){for(;c<a.schema.items.length;c++)a.code("if ("+a.path+".length - 1 >= "+c+") {"),a.descend(a.path+"["+c+"]",a.schema.items[c]),a.code("}");"object"===g(a.schema.additionalItems)&&(a.code("for ("+b+" = "+c+"; "+b+" < "+a.path+".length; "+b+"++) {"),a.descend(a.path+"["+b+"]",a.schema.additionalItems),a.code("}"))}},E.maxProperties=function(a){h(a.schema.maxProperties)&&(a.code("if (Object.keys("+a.path+").length > "+a.schema.maxProperties+") {"),a.error("maxProperties"),a.code("}"))},E.minProperties=function(a){h(a.schema.minProperties)&&(a.code("if (Object.keys("+a.path+").length < "+a.schema.minProperties+") {"),a.error("minProperties"),a.code("}"))},E.required=function(a){if(Array.isArray(a.schema.required))for(var b=0;b<a.schema.required.length;b++)a.code("if ("+f(a.path,a.schema.required[b])+" === undefined) {"),a.error("required",a.schema.required[b]),a.code("}")},E.properties=function(a){var b,c,d,e=a.schema.properties,h="object"===g(e)?Object.keys(e):[],i=Array.isArray(a.schema.required)?a.schema.required:[];if(h.length)for(c=0;c<h.length;c++)b=h[c],d=f(a.path,b),a.code("if ("+d+" !== undefined) {"),a.descend(d,e[b]),a.code("}"),i.indexOf(b)>-1&&(a.code("else {"),a.error("required",b),a.code("}"))},E.patternProperties=E.additionalProperties=function(a){var b,c,e,f,h,i,j,k="object"===g(a.schema.properties)?Object.keys(a.schema.properties):[],l=a.schema.patternProperties,m="object"===g(l)?Object.keys(l):[],n=a.schema.additionalProperties,o=n===!1||"object"===g(n);if(m.length||o){for(c=a.declare("[]"),e=a.declare('""'),f=a.declare(0),o&&(h=a.declare(!1)),a.code(c+" = Object.keys("+a.path+")"),a.code("for ("+f+" = 0; "+f+" < "+c+".length; "+f+"++) {")(e+" = "+c+"["+f+"]")("if ("+a.path+"["+e+"] === undefined) {")("continue")("}"),o&&a.code(h+" = false"),j=0;j<m.length;j++)i=m[j],a.code("if (("+d(i)+").test("+e+")) {"),a.descend(a.path+"["+e+"]",l[i]),o&&a.code(h+" = true"),a.code("}");o&&(k.length&&(b=a.declare(JSON.stringify(k)),a.code("if ("+b+".indexOf("+e+") > -1) {")("continue")("}")),a.code("if (!"+h+") {"),n===!1?a.error("additionalProperties",void 0,e):a.descend(a.path+"["+e+"]",n),a.code("}")),a.code("}")}},E.dependencies=function(a){if("object"===g(a.schema.dependencies))for(var b,c,d=Object.keys(a.schema.dependencies),e=d.length,h=0,i=0;e>i;i++){if(b=d[i],c=a.schema.dependencies[b],a.code("if ("+f(a.path,b)+" !== undefined) {"),"object"===g(c))a.descend(a.path,c);else for(h;h<c.length;h++)a.code("if ("+f(a.path,c[h])+" === undefined) {"),a.error("dependencies",c[h]),a.code("}");a.code("}")}},E.allOf=function(a){if(Array.isArray(a.schema.allOf))for(var b=0;b<a.schema.allOf.length;b++)a.descend(a.path,a.schema.allOf[b])},E.anyOf=function(a){if(Array.isArray(a.schema.anyOf)){var b=a.greedy,c=a.declare(0),d=a.declare(0),e=a.declare(!1),f=0;for(a.code(d+" = errors.length");f<a.schema.anyOf.length;f++)a.code("if (!"+e+") {"),a.code(c+" = errors.length"),a.greedy=!0,a.descend(a.path,a.schema.anyOf[f]),a.code(e+" = errors.length === "+c)("}");a.greedy=b,a.code("if (!"+e+") {"),a.error("anyOf"),a.code("} else {")("errors.length = "+d)("}")}},E.oneOf=function(a){if(Array.isArray(a.schema.oneOf)){var b=a.greedy,c=a.declare(0),d=a.declare(0),e=a.declare(0),f=0;for(a.code(d+" = errors.length"),a.code(c+" = 0");f<a.schema.oneOf.length;f++)a.code(e+" = errors.length"),a.greedy=!0,a.descend(a.path,a.schema.oneOf[f]),a.code("if (errors.length === "+e+") {")(c+"++")("}");a.greedy=b,a.code("if ("+c+" !== 1) {"),a.error("oneOf"),a.code("} else {")("errors.length = "+d)("}")}},E.not=function(a){if("object"===g(a.schema.not)){var b=a.greedy,c=a.declare(0);a.code(c+" = errors.length"),a.greedy=!0,a.descend(a.path,a.schema.not),a.greedy=b,a.code("if (errors.length === "+c+") {"),a.error("not"),a.code("} else {")("errors.length = "+c)("}")}},["minimum","exclusiveMinimum","maximum","exclusiveMaximum","multipleOf"].forEach(i.bind(null,"number")),["minLength","maxLength","pattern","format"].forEach(i.bind(null,"string")),["minItems","maxItems","additionalItems","uniqueItems","items"].forEach(i.bind(null,"array")),["maxProperties","minProperties","required","properties","patternProperties","additionalProperties","dependencies"].forEach(i.bind(null,"object")),["enum","allOf","anyOf","oneOf","not"].forEach(i.bind(null,null)),n.prototype.mark=function(a,b){var c,d=this.objects.indexOf(a);return 0>d?(this.objects.push(a),c={},c[b]=1,void this.properties.push(c)):(c=this.properties[d],void(c[b]=c[b]?c[b]+1:1))},n.prototype.deleteDuplicates=function(){var a,b,c,d,e;for(d=0;d<this.properties.length;d++)for(a=this.properties[d],b=Object.keys(a),e=0;e<b.length;e++)c=b[e],a[c]>1&&delete this.objects[d][c]},n.prototype.dispose=function(){this.objects.length=0,this.properties.length=0},p.prototype.clone=function(a){var b=new p({schema:a,formats:this.formats,greedy:this.greedy,resolver:this.resolver,id:this.id,funcache:this.funcache,scope:this.scope});return b},p.prototype.declare=function(a){var b=this.id();return this.code.def(b,a),b},p.prototype.cache=function(a,b){var c,d=this.funcache[a];return d||(d=this.funcache[a]={key:this.id()},c=this.clone(b),d.func=c.compile(d.key),this.scope.refs[d.key]=d.func,c.dispose()),"refs."+d.key},p.prototype.error=function(a,b,c){var d=this.schema,f=this.path,g="data"!==f||b?'(path ? path + "." : "") + '+k(f,b)+",":"path,",h=b&&d.properties&&d.properties[b]?this.resolver.resolve(d.properties[b]):null,i=h?h.requiredMessage:d.invalidMessage;i||(i=h&&h.messages&&h.messages[a]||d.messages&&d.messages[a]),this.code("errors.push({"),i&&this.code("message: "+e(i)+","),c&&this.code("additionalProperties: "+c+","),this.code("path: "+g)("keyword: "+e(a))("})"),this.greedy||this.code("return")},p.prototype.refactor=function(a,b,c){var d="data"!==a?'(path ? path + "." : "") + '+k(a):"path",e=this.cache(c,b),f=this.declare();this.code(f+" = "+e+"("+a+", "+d+", errors)"),this.greedy||this.code("if (errors.length) { return }")},p.prototype.descend=function(a,b){var c=this.path,d=this.schema;this.path=a,this.schema=b,this.generate(),this.path=c,this.schema=d},p.prototype.generate=function(){function a(a){E[a](o)}var b,c,f,h,i,k,l,m=this.path,n=this.schema,o=this,p=this.scope;if("object"===g(n)){if(void 0!==n.$ref){if(n=this.resolver.resolve(n),this.resolver.hasRef(n))return void this.refactor(m,n,this.resolver.getNormalizedRef(this.schema)||this.schema.$ref);this.schema=n}if(f=j(n),f["enum"])return void E["enum"](o);h=Object.keys(f.perType);var q=f.type&&f.type.length;for(q&&(this.code("if (!("+f.type.map(function(a){return D[a]?D[a](m):"true"}).join(" || ")+")) {"),this.error("type"),this.code("}")),l=0;l<h.length;l++)k=h[l],this.code((q?"else ":"")+"if ("+D[k](m)+") {"),f.perType[k].forEach(a),this.code("}"),f.type&&(i=f.type.indexOf(k),i>-1&&f.type.splice(i,1));f.type&&!f.type.length&&(this.code("else {"),this.error("type"),this.code("}")),f.allType.forEach(function(a){E[a](o)}),n.format&&this.formats&&(c=this.formats[n.format],c&&("string"==typeof c||c instanceof RegExp?(this.code("if (!("+d(c)+").test("+m+")) {"),this.error("format"),this.code("}")):"function"==typeof c&&((p.formats||(p.formats={}))[n.format]=c,(p.schemas||(p.schemas={}))[n.format]=n,b=e(n.format),this.code("if (!formats["+b+"]("+m+", schemas["+b+"])) {"),this.error("format"),this.code("}"))))}},p.prototype.compile=function(a){return this.code=x("jsen_compiled"+(a?"_"+a:""),"data","path","errors"),this.generate(),this.code.compile(this.scope)},p.prototype.dispose=function(){for(var a in this)this[a]=void 0},q.browser=v,q.clone=l,q.equal=y,q.unique=z,q.ucs2length=C,q.SchemaResolver=A,q.resolve=A.resolvePointer,b.exports=q},{"./equal.js":2,"./formats.js":3,"./func.js":4,"./resolver.js":7,"./ucs2length.js":8,"./unique.js":9}],6:[function(a,b,c){b.exports={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}}},{}],7:[function(a,b,c){"use strict";function d(a,b){if(!b.length)return a;var c,e=b.shift();return a&&"object"==typeof a&&a.hasOwnProperty(e)&&(c=a[e]),b.length?c&&"object"==typeof c?d(c,b):void 0:c}function e(a){var b=a.indexOf("#"),c={base:a.substr(0,b),path:[]};return 0>b?(c.base=a,c):(a=a.substr(b+1))?(c.path=a.split("/").map(function(a){return decodeURIComponent(a).replace(/~1/g,"/").replace(/~0/g,"~")}),"/"===a[0]&&c.path.shift(),c):c}function f(a,b,c,d){this.rootSchema=a,this.resolvers=null,this.resolvedRootSchema=null,this.cache={},this.idCache={},this.refCache={refs:[],schemas:[]},this.missing$Ref=c,this.refStack=[],d=d||"",this._buildIdCache(a,d),d=this.refCache.refs[this.refCache.schemas.indexOf(this.rootSchema)]||d,this._buildResolvers(b,d)}var g=a("url"),h=a("./metaschema.json"),i="jsen: invalid schema reference",j="jsen: duplicate schema id",k="jsen: circular schema reference";f.prototype._cacheId=function(a,b,c){if(this.idCache[a])throw new Error(j+" "+a);this.idCache[a]={resolver:c,schema:b}},f.prototype._buildIdCache=function(a,b){var c,d,e,f=b;if(a&&"object"==typeof a)for("string"==typeof a.id&&a.id?(f=g.resolve(b,a.id),this._cacheId(f,a,this)):a===this.rootSchema&&b&&this._cacheId(b,a,this),a.$ref&&"string"==typeof a.$ref&&(c=g.resolve(f,a.$ref),this.refCache.schemas.push(a),this.refCache.refs.push(c)),d=Object.keys(a),e=0;e<d.length;e++)this._buildIdCache(a[d[e]],f)},f.prototype._buildResolvers=function(a,b){if(a&&"object"==typeof a){var c=this,d={};Object.keys(a).forEach(function(e){var h=g.resolve(b,e),i=new f(a[e],null,c.missing$Ref,h);c._cacheId(h,i.rootSchema,i),Object.keys(i.idCache).forEach(function(a){c.idCache[a]=i.idCache[a]}),d[e]=i}),this.resolvers=d}},f.prototype.getNormalizedRef=function(a){var b=this.refCache.schemas.indexOf(a);return this.refCache.refs[b]},f.prototype._resolveRef=function(a){var b,c,f,g,j,k=new Error(i+" "+a),l=this.idCache;if(!a||"string"!=typeof a)throw k;if(a===h.id&&(j=h),c=l[a],c&&(j=c.resolver.resolve(c.schema)),void 0===j&&(f=e(a),g=f.path,f.base&&(c=l[f.base]||l[f.base+"#"],c?j=c.resolver.resolve(d(c.schema,g.slice(0))):g.unshift(f.base))),void 0===j&&this.resolvedRootSchema&&(j=d(this.resolvedRootSchema,g.slice(0))),void 0===j&&(j=d(this.rootSchema,g.slice(0))),void 0===j&&g.length&&this.resolvers&&(b=d(this.resolvers,g),b&&(j=b.resolve(b.rootSchema))),void 0===j||"object"!=typeof j){if(!this.missing$Ref)throw k;j={}}return this.cache[a]===j?j:(this.cache[a]=j,void 0!==j.$ref&&(j=this.resolve(j)),j)},f.prototype.resolve=function(a){if(!a||"object"!=typeof a||void 0===a.$ref)return a;var b=this.getNormalizedRef(a)||a.$ref,c=this.cache[b];if(void 0!==c)return c;if(this.refStack.indexOf(b)>-1)throw new Error(k+" "+b);return this.refStack.push(b),c=this._resolveRef(b),this.refStack.pop(),a===this.rootSchema&&(this.resolvedRootSchema=c),c},f.prototype.hasRef=function(a){var b,c,d,e,f=Object.keys(a);if(f.indexOf("$ref")>-1)return!0;for(d=0,b=f.length;b>d;d++)if(c=f[d],a[c]&&"object"==typeof a[c]&&!Array.isArray(a[c])&&(e=this.hasRef(a[c])))return!0;return!1},f.resolvePointer=function(a,b){var c=e(b),f=c.path;return c.base&&(f=[c.base].concat(f)),d(a,f)},b.exports=f},{"./metaschema.json":6,url:14}],8:[function(a,b,c){"use strict";function d(a){for(var b,c,d=0,e=0,f=a.length;f>e;)d++,b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e&&(c=a.charCodeAt(e++),56320!==(64512&c)&&e--);return d}b.exports=d},{}],9:[function(a,b,c){"use strict";function d(a,b,c){for(var d=0,e=a.length;e>d;d++)if(c(a[d],b))return d;return-1}var e=a("./equal.js");b.exports=function(a){return a.filter(function(a,b,c){return d(c,a,e)===b})},b.exports.findIndex=d},{"./equal.js":2}],10:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;(t.global===t||t.window===t||t.self===t)&&(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],12:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],13:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":11,"./encode":12}],14:[function(a,b,c){function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return i(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}function i(a){return"string"==typeof a}function j(a){return"object"==typeof a&&null!==a}function k(a){return null===a}function l(a){return null==a}var m=a("punycode");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var n=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,p=["<",">",'"',"`"," ","\r","\n","	"],q=["{","}","|","\\","^","`"].concat(p),r=["'"].concat(q),s=["%","/","?",";","#"].concat(r),t=["/","?","#"],u=255,v=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},y={javascript:!0,"javascript:":!0},z={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},A=a("querystring");d.prototype.parse=function(a,b,c){if(!i(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a;d=d.trim();var e=n.exec(d);if(e){e=e[0];var f=e.toLowerCase();this.protocol=f,d=d.substr(e.length)}if(c||e||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var g="//"===d.substr(0,2);!g||e&&y[e]||(d=d.substr(2),this.slashes=!0)}if(!y[e]&&(g||e&&!z[e])){for(var h=-1,j=0;j<t.length;j++){var k=d.indexOf(t[j]);-1!==k&&(-1===h||h>k)&&(h=k)}var l,o;o=-1===h?d.lastIndexOf("@"):d.lastIndexOf("@",h),-1!==o&&(l=d.slice(0,o),d=d.slice(o+1),this.auth=decodeURIComponent(l)),h=-1;for(var j=0;j<s.length;j++){var k=d.indexOf(s[j]);-1!==k&&(-1===h||h>k)&&(h=k)}-1===h&&(h=d.length),this.host=d.slice(0,h),d=d.slice(h),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var q=this.hostname.split(/\./),j=0,B=q.length;B>j;j++){var C=q[j];if(C&&!C.match(v)){for(var D="",E=0,F=C.length;F>E;E++)D+=C.charCodeAt(E)>127?"x":C[E];if(!D.match(v)){var G=q.slice(0,j),H=q.slice(j+1),I=C.match(w);I&&(G.push(I[1]),H.unshift(I[2])),H.length&&(d="/"+H.join(".")+d),this.hostname=G.join(".");break}}}if(this.hostname.length>u?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var J=this.hostname.split("."),K=[],j=0;j<J.length;++j){var L=J[j];K.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+m.encode(L):L)}this.hostname=K.join(".")}var M=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+M,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!x[f])for(var j=0,B=r.length;B>j;j++){var O=r[j],P=encodeURIComponent(O);P===O&&(P=escape(O)),d=d.split(O).join(P)}var Q=d.indexOf("#");-1!==Q&&(this.hash=d.substr(Q),d=d.slice(0,Q));var R=d.indexOf("?");if(-1!==R?(this.search=d.substr(R),this.query=d.substr(R+1),b&&(this.query=A.parse(this.query)),d=d.slice(0,R)):b&&(this.search="",this.query={}),d&&(this.pathname=d),z[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",L=this.search||"";this.path=M+L}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j(this.query)&&Object.keys(this.query).length&&(f=A.stringify(this.query));
var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||z[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(i(a)){var b=new d;b.parse(a,!1,!0),a=b}var c=new d;if(Object.keys(this).forEach(function(a){c[a]=this[a]},this),c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(c[b]=a[b])}),z[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c;if(a.protocol&&a.protocol!==c.protocol){if(!z[a.protocol])return Object.keys(a).forEach(function(b){c[b]=a[b]}),c.href=c.format(),c;if(c.protocol=a.protocol,a.host||y[a.protocol])c.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==e[0]&&e.unshift(""),e.length<2&&e.unshift(""),c.pathname=e.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var f=c.pathname||"",g=c.search||"";c.path=f+g}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var h=c.pathname&&"/"===c.pathname.charAt(0),j=a.host||a.pathname&&"/"===a.pathname.charAt(0),m=j||h||c.host&&a.pathname,n=m,o=c.pathname&&c.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],p=c.protocol&&!z[c.protocol];if(p&&(c.hostname="",c.port=null,c.host&&(""===o[0]?o[0]=c.host:o.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),m=m&&(""===e[0]||""===o[0])),j)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,o=e;else if(e.length)o||(o=[]),o.pop(),o=o.concat(e),c.search=a.search,c.query=a.query;else if(!l(a.search)){if(p){c.hostname=c.host=o.shift();var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return c.search=a.search,c.query=a.query,k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!o.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var r=o.slice(-1)[0],s=(c.host||a.host)&&("."===r||".."===r)||""===r,t=0,u=o.length;u>=0;u--)r=o[u],"."==r?o.splice(u,1):".."===r?(o.splice(u,1),t++):t&&(o.splice(u,1),t--);if(!m&&!n)for(;t--;t)o.unshift("..");!m||""===o[0]||o[0]&&"/"===o[0].charAt(0)||o.unshift(""),s&&"/"!==o.join("/").substr(-1)&&o.push("");var v=""===o[0]||o[0]&&"/"===o[0].charAt(0);if(p){c.hostname=c.host=v?"":o.length?o.shift():"";var q=c.host&&c.host.indexOf("@")>0?c.host.split("@"):!1;q&&(c.auth=q.shift(),c.host=c.hostname=q.shift())}return m=m||c.host&&o.length,m&&!v&&o.unshift(""),o.length?c.pathname=o.join("/"):(c.pathname=null,c.path=null),k(c.pathname)&&k(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=o.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{punycode:10,querystring:13}]},{},[1])(1)});